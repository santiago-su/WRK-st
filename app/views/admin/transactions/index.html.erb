<script>
  $(document).ready(function () {
    sortTable("#transaction_table", "date");
  });
</script>

<h1>Movimientos
<%= link_to '#new_transaction_modal', 'data-toggle' => 'modal', class: "btn btn-primary" do %>
  <span class="glyphicon glyphicon-plus"></span> Nuevo movimiento
<% end %>
</h1>

<table id="transaction_table" class="table table-hover">
  <thead>
    <tr>
      <th>Fecha</th>
      <th>Concepto</th>
      <th>Cantidad</th>
      <th>Comentario</th>
    </tr>
  </thead>
  <tbody>
    <% @transactions.each do |transaction| %>
      <%= render partial: 'row', locals: { transaction: transaction } %>
    <% end %>
  </tbody>
</table>

<div class="modal fade" id="new_transaction_modal" tabindex="-1" role="dialog"
 aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Nuevo movimiento</h4>
      </div>
      <div class="modal-body">
        <%= render 'form', transaction: @transaction %>
      </div>

    </div>
  </div>
</div>

<% content_for :sidebar do %>
  <h3>Mi saldo es:</h3> <h3><%= number_to_currency(current_admin.balance) %></h3>
<% end %>
